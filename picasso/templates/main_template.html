{% load staticfiles %}
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Picasso | Personal Teachers Near You</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description"
          content="Reviews and Recommendations of Top Teachers, Tutors, Trainers, and Coaches near You.">
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/prettyPhoto.css' %}">
    <link rel="stylesheet" href="{% static 'css/smoothness/jquery-ui-1.10.4.custom.min.css' %}">
    <link rel="stylesheet" href="{% static 'rs-plugin/css/settings.css' %}">
    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/colors/turquoise.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600,700">
    <script type="text/javascript" src="{% static 'js/jquery-1.11.0.min.js' %}"></script>
    <link href="{% static 'css/star-rating.min.css' %}" media="all" rel="stylesheet" type="text/css"/>
    <link href="{% static 'css/bootstrap-switch.min.css' %}" media="all" rel="stylesheet" type="text/css"/>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-52248102-1', 'findpicasso.com');
        ga('require', 'displayfeatures');
        ga('send', 'pageview');

    </script>
</head>
<body>
<!-- Header -->
<header>
    <!-- Navigation -->
    <div class="navbar yamm navbar-default" id="sticky">
        <div class="container">
            <div class="navbar-header">
                <button type="button" data-toggle="collapse" data-target="#navbar-collapse-grid" class="navbar-toggle">
                    <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
                </button>
                <a href="/" class="navbar-brand">
                    <!-- Logo -->
                    <div id="logo"><img id="default-logo" src="{% static 'images/logo.png' %}" alt="Picasso"
                                        style="height:44px;">
                        <img id="retina-logo" src="{% static 'images/logo.png' %}" alt="Picasso"
                             style="height:44px;"></div>
                </a></div>
            <div id="navbar-collapse-grid" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Home</a>
                    </li>
                    {% if not user.is_authenticated %}
                        <li><a href="#sign-in-lightbox" id="sign-up">Sign Up</a></li>
                        <li><a href="#sign-in-lightbox" id="login">Login</a></li>
                    {% else %}
                        <li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle js-activated">
                            Listings <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                {% if user.owner.count != 0 %}
                                    <li><a href="{% url 'profile:my_listings' %}" id="sign-up">My Listings</a></li>
                                {% else %}
                                    <li><a href="{% url 'profile:my_listings' %}?add=add" id="sign-up">Add Listing</a>
                                    </li>
                                {% endif %}
                                <li><a href="{% url 'profile:my_teachers' %}" id="login">Favourite Teachers</a></li>
                            </ul>
                        </li>
                        <li class=""><a href="{% url 'profile:my_reviews' %}">Reviews</a>
                        </li>
                        <li class=""><a href="{% url 'profile:profile' %}">Profile</a>
                        </li>
                        <li class=""><a href="{% url 'logout' %}">Logout</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</header>
{% block above_content %}
{% endblock %}
<!-- Reservation form -->
<section id="reservation-form">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <form class="form-inline reservation-horizontal clearfix" role="form" method="post"
                      action="" name="reservationform" id="reservationform" onsubmit="javascript:void (0);">
                    <div id="message"></div>
                    <!-- Error message display -->
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <i class="fa fa-3x fa-search"
                                   style="position: absolute; top: 10px; left: 25px; z-index: 1000;"></i>
                                <input type="text" name="search" id="search-text"
                                       value="What are you looking for?" onblur="if (this.value == '')
                            this.value = this.defaultValue" onfocus="if (this.value == this.defaultValue)
                            this.value = ''" class="form-control autocomplete"
                                       style="font-size: 36px; height: 100%; padding-left: 55px">
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <i class="fa fa-3x fa-map-marker"
                                   style="position: absolute; top: 15px; left: 25px; z-index: 1000;"></i>
                                <input type="text" name="location" id="location-text" value="Toronto" onblur="if (this.value == '')
                            this.value = this.defaultValue" onfocus="if (this.value == this.defaultValue)
                            this.value = ''" class="form-control" style="font-size: 36px; height: 100%;
                            padding-left: 50px">
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-primary btn-block" id="search-submisson">Search Now
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<div id="main-section">
    {% block content %}
    {% endblock %}
</div>
{% if not user.is_authenticated %}
    <div id="sign-in-lightbox" style="display: none">
        <div class="container">
            <div class="row mt50">
                <div class="col-sm-12">
                    <h2 class="lined-heading"><span id="signin-heading">Sign Up</span></h2>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <form class="clearfix" role="form" method="post" action="{% url 'signup' %}"
                          id="signupform" onsubmit="javascript:void(0)">
                        {% csrf_token %}
                        <input type="hidden" value="sign-up" id="type-signin" name="type">

                        <div class="row" id="sign-up-stuff">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="first-name" accesskey="U"><span class="required">*</span>First
                                        Name</label>
                                    <input name="first-name" type="text" id="first-name" class="form-control" value="">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="last-name" accesskey="E"><span class="required">*</span>Last
                                        Name</label>
                                    <input name="last-name" type="text" id="last-name" value="" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="email" accesskey="S"><span class="required">*</span>Email</label>
                            <input name="email" id="email" class="form-control" type="email">
                        </div>
                        <div class="form-group">
                            <label for="password" accesskey="S"><span class="required">*</span>Password</label>
                            <input name="password" id="password" class="form-control" type="password">
                        </div>
                        <div class="error_message">

                        </div>
                        <button type="button" class="btn  btn-lg btn-primary" id="sign-in-button">Sign Up</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endif %}
<div id="contact-us-div" style="display: none">
    <section id="contact-form" class="mt50">
        <div class="col-md-8">
            <h2 class="lined-heading"><span>Send us a message</span></h2>

            <div id="message"></div>
            <!-- Error message display -->
            <form class="clearfix mt50" role="form" method="post" action="#" name="contactform" onsubmit="return false;"
                  id="contactform">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="contact-email" accesskey="E"><span class="required">*</span> E-mail</label>
                            <input name="email" type="text" id="contact-email" value="" class="form-control"/>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="contact-comments" accesskey="C"><span class="required">*</span> Your message</label>
                    <textarea name="comments" rows="9" id="contact-comments" class="form-control"></textarea>
                </div>
                <button type="button" class="btn  btn-lg btn-primary" id="contact-us-submit">Send message</button>
            </form>
        </div>
    </section>
</div>
<!-- Footer -->
<footer style="margin-top: 20px;">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-3">
                <h4><a href="{% url 'about' %}">About Picasso</a></h4>
            </div>
            <div class="col-md-3 col-sm-3">
                <h4><a href="{% url 'content' %}">Content Guidelines</a></h4>
            </div>
            <div class="col-md-3 col-sm-3">
                <h4><a href="{% url 'privacy' %}">Privacy Policy</a></h4>
            </div>
            <div class="col-md-3 col-sm-3">
                <h4><a href="{% url 'terms' %}">Terms of Agreement</a></h4>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <div class="container">
            <div class="row">
                <div class="col-xs-6"> &copy; 2014 Picasso All Rights Reserved</div>
                <div class="col-xs-6 text-right">
                    <ul>
                        <li><a href="#contact-us-div" id="contact-us-click">Contact</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
</body>
<script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap-hover-dropdown.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/owl.carousel.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.parallax-1.1.3.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.nicescroll.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.prettyPhoto.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery-ui-1.10.4.custom.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.jigowatt.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.sticky.js' %}"></script>
<script type="text/javascript" src="{% static 'js/waypoints.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.isotope.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.gmap.min.js' %}"></script>
<script type="text/javascript" src="{% static 'rs-plugin/js/jquery.themepunch.plugins.min.js' %}"></script>
<script type="text/javascript" src="{% static 'rs-plugin/js/jquery.themepunch.revolution.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/custom.js' %}"></script>
<script type="text/javascript" src="{% static 'js/star-rating.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap-switch.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/typehead.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bloodhound.js' %}"></script>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
<script>
    $(function () {
        var $main = $('#main-section');
        $('#search-submisson').click(function (e) {
            $main.empty();
            $main.append('<div class="container mt50" style="text-align: center; margin-bottom: 50px"><img src="{% static 'images/ui/AjaxLoader.gif' %}" alt="loading"></div>');
            $.get('{% url 'get_listings' %}', {'term': $('#search-text').val() + '----' + $('#location-text').val()}, function (data) {
                $main.empty();
                $main.append(data);
            });
            return false;
        });
        {% if not user.is_authenticated %}
            $('#sign-up').click(function () {
                $('#main-section').hide();
                $('#sign-in-lightbox').show();
                $('#sign-up-stuff').show();
                $('#type-signin').val('sign-up');
                $('#signin-heading').text('Sign Up');
                $('#sign-in-button').text('Sign Up');
            });

            $('#login').click(function () {
                $('#main-section').hide();
                $('#sign-in-lightbox').show();
                $('#sign-up-stuff').hide();
                $('#type-signin').val('login');
                $('#signin-heading').text('Login');
                $('#sign-in-button').text('Login');
            });

            $('#sign-in-button').click(function () {
                $.post('{% url 'signup' %}', {'first-name': $('#first-name').val(),
                    'last-name': $('#last-name').val(), 'type': $('#type-signin').val(),
                    'email': $('#email').val(), 'password': $('#password').val(),
                    'csrfmiddlewaretoken': $($('input[name="csrfmiddlewaretoken"]')[0]).val()}, function (data) {
                    if (parseInt(data['success']) == 0) {
                        $('.error_message').text(data['error']);
                    } else {
                        document.location.href = '/';
                    }
                });
            });
        {% endif %}
        var tags = {{ tags|safe }};
        // constructs the suggestion engine
        var tags_blood = new Bloodhound({
            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            // `states` is an array of state names defined in "The Basics"
            local: $.map(tags, function (state) {
                return { value: state };
            })
        });
        tags_blood.initialize();

        $('.autocomplete').typeahead({
                    hint: true,
                    highlight: true,
                    minLength: 1
                },
                {
                    name: 'tags',
                    displayKey: 'value',
                    source: tags_blood.ttAdapter()
                });
        var $contact_div = $('#contact-us-div');
        $('#contact-us-click').click(function () {
            $main.hide();
            $contact_div.show();
        });
        $('#contact-us-submit').click(function () {
            $.post('{% url 'contact' %}', {'csrfmiddlewaretoken': $($('input[name="csrfmiddlewaretoken"]')[0]).val(),
                'email': $('#contact-email').val(), 'comment': $('#contact-comments').val()
            }, function (res) {
                $contact_div.empty();
                $contact_div.append('<div class="mt20" style="text-align=center"><p>Thank you for your message! We will try and get back to you as soon as possible.</p></div>')
                setTimeout(function () {
                    $contact_div.hide();
                    $main.show();
                }, 1000);
            });
        });
    });
</script>
{% block scripts %}

{% endblock %}
</html>